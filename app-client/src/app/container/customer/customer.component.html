<div nz-row class="mgbt20">
  <div nz-col nzSpan="12">
    <h3>Khách Hàng</h3>
  </div>
  <div nz-col nzSpan="12">
    <div class="float-right">
      <button (click)="handleCorU()" nz-button nzType="primary" [nzSize]="Large"><i nz-icon nzType="plus"
          nzTheme="outline"></i>
        Tạo mới </button>
    </div>

  </div>
</div>
<div class="box box-success">
  <div class="box-body">
    <nz-table nzBordered #ajaxTable nzShowSizeChanger [nzFrontPagination]="false" [nzData]="listOfData"
      [nzLoading]="loading" [nzTotal]="total" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize"
      (nzPageIndexChange)="searchData()" (nzPageSizeChange)="searchData(true)">
      <thead (nzSortChange)="sort($event)" nzSingleSort>
        <tr>
          <th nzCustomFilter nzShowSort nzSortKey="name" width="15%">
            Họ tên
            <nz-dropdown nzTrigger="click" nzPlacement="bottomRight" [nzClickHide]="false" nzTableFilter #dropdown>
              <i nz-icon nzType="search" class="ant-table-filter-icon"
                [class.ant-table-filter-open]="dropdown.nzVisible" nz-dropdown></i>
              <div class="search-box">
                <input type="text" nz-input placeholder="Tìm kiếm " [(ngModel)]="searchValue" />
                <button nz-button nzSize="small" nzType="primary" (click)="search({key:'name',value: searchValue})"
                  class="search-button">
                  Search
                </button>
                <button nz-button nzSize="small" (click)="reset()">Reset</button>
              </div>
            </nz-dropdown>

          <th width="10%" class="text-center">
            Điện thạoi
          </th>
          <th width="15%" class="text-center" >
            Chứng minh
          </th>
          <th width="15%"  class="text-center">
            <span>Hình ảnh</span>
          </th>
          <th width="15%" nzShowSort nzSortKey="address">
            <span>Địa chỉ</span>
            <nz-dropdown nzTrigger="click" nzPlacement="bottomRight" [nzClickHide]="false" nzTableFilter #dropdown>
              <i nz-icon nzType="search" class="ant-table-filter-icon"
                [class.ant-table-filter-open]="dropdown.nzVisible" nz-dropdown></i>
              <div class="search-box">
                <input type="text" nz-input placeholder="Search name" [(ngModel)]="searchValue" />
                <button nz-button nzSize="small" nzType="primary" (click)="search({key:'address',value: searchValue})"
                  class="search-button">
                  Search
                </button>
                <button nz-button nzSize="small" (click)="reset()">Reset</button>
              </div>
            </nz-dropdown>
          </th>

          <th width="20%" class="text-center"><span>Action</span></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of ajaxTable.data">
          <td>{{ data.name }}</td>
          <td>{{ data.phone }}</td>
          <td class="text-center">{{ data.identity_number }}</td>
          <td>{{ data.identity_images }}</td>
          <td>{{ data.address }}</td>
          <td class="cttd" class="text-center">
            <div zn-row>
              <button nz-tooltip nzTitle="Giao dịch và công nợ" [routerLink]="['/manager/clients',data.id]" nz-button
                nzType="primary" style="margin-right: 10px">
                <i nz-icon nzType="snippets" nzTheme="outline"></i>
              </button>
              <button nz-tooltip nzTitle="Sửa khách hàng" (click)="handleCorU(data)" nz-button nzType="primary"
                style="margin-right: 10px">
                <i nz-icon nzType="edit" nzTheme="outline"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
      <div zn-row style="margin-top: 10px">
        <strong *ngIf="total!=0">Tổng số: {{total}}</strong>
      </div>
    </nz-table>
  </div>
</div>

<app-cou-customer *ngIf="isVisible" [dataEdit]="dataEdit" [isVisible]="isVisible" (closeModal)="closeModal($event)"
  class="fade in">
</app-cou-customer>